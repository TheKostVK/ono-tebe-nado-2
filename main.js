(()=>{var e={484:function(e){e.exports=function(){"use strict";var e=1e3,s=6e4,n=36e5,r="millisecond",o="second",_="minute",b="hour",g="day",k="week",w="month",T="quarter",E="year",C="date",x="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var s=["th","st","nd","rd"],n=e%100;return"["+e+(s[(n-20)%10]||s[n]||s[0])+"]"}},m=function(e,s,n){var r=String(e);return!r||r.length>=s?e:""+Array(s+1-r.length).join(n)+e},N={s:m,z:function(e){var s=-e.utcOffset(),n=Math.abs(s),r=Math.floor(n/60),o=n%60;return(s<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var n=12*(s.year()-e.year())+(s.month()-e.month()),r=e.clone().add(n,w),o=s-r<0,_=e.clone().add(n+(o?-1:1),w);return+(-(n+(s-r)/(o?r-_:_-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:w,y:E,w:k,d:g,D:C,h:b,m:_,s:o,ms:r,Q:T}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},Y="en",H={};H[Y]=L;var j="$isDayjsObject",S=function(e){return e instanceof q||!(!e||!e[j])},F=function t(e,s,n){var r;if(!e)return Y;if("string"==typeof e){var o=e.toLowerCase();H[o]&&(r=o),s&&(H[o]=s,r=o);var _=e.split("-");if(!r&&_.length>1)return t(_[0])}else{var b=e.name;H[b]=e,r=b}return!n&&r&&(Y=r),r||!n&&Y},O=function(e,s){if(S(e))return e.clone();var n="object"==typeof s?s:{};return n.date=e,n.args=arguments,new q(n)},B=N;B.l=F,B.i=S,B.w=function(e,s){return O(e,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var q=function(){function M(e){this.$L=F(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[j]=!0}var L=M.prototype;return L.parse=function(e){this.$d=function(e){var s=e.date,n=e.utc;if(null===s)return new Date(NaN);if(B.u(s))return new Date;if(s instanceof Date)return new Date(s);if("string"==typeof s&&!/Z$/i.test(s)){var r=s.match(A);if(r){var o=r[2]-1||0,_=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,_)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,_)}}return new Date(s)}(e),this.init()},L.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},L.$utils=function(){return B},L.isValid=function(){return!(this.$d.toString()===x)},L.isSame=function(e,s){var n=O(e);return this.startOf(s)<=n&&n<=this.endOf(s)},L.isAfter=function(e,s){return O(e)<this.startOf(s)},L.isBefore=function(e,s){return this.endOf(s)<O(e)},L.$g=function(e,s,n){return B.u(e)?this[s]:this.set(n,e)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(e,s){var n=this,r=!!B.u(s)||s,T=B.p(e),l=function(e,s){var o=B.w(n.$u?Date.UTC(n.$y,s,e):new Date(n.$y,s,e),n);return r?o:o.endOf(g)},$=function(e,s){return B.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(s)),n)},x=this.$W,A=this.$M,I=this.$D,L="set"+(this.$u?"UTC":"");switch(T){case E:return r?l(1,0):l(31,11);case w:return r?l(1,A):l(0,A+1);case k:var N=this.$locale().weekStart||0,Y=(x<N?x+7:x)-N;return l(r?I-Y:I+(6-Y),A);case g:case C:return $(L+"Hours",0);case b:return $(L+"Minutes",1);case _:return $(L+"Seconds",2);case o:return $(L+"Milliseconds",3);default:return this.clone()}},L.endOf=function(e){return this.startOf(e,!1)},L.$set=function(e,s){var n,k=B.p(e),T="set"+(this.$u?"UTC":""),x=(n={},n[g]=T+"Date",n[C]=T+"Date",n[w]=T+"Month",n[E]=T+"FullYear",n[b]=T+"Hours",n[_]=T+"Minutes",n[o]=T+"Seconds",n[r]=T+"Milliseconds",n)[k],A=k===g?this.$D+(s-this.$W):s;if(k===w||k===E){var I=this.clone().set(C,1);I.$d[x](A),I.init(),this.$d=I.set(C,Math.min(this.$D,I.daysInMonth())).$d}else x&&this.$d[x](A);return this.init(),this},L.set=function(e,s){return this.clone().$set(e,s)},L.get=function(e){return this[B.p(e)]()},L.add=function(r,T){var C,x=this;r=Number(r);var A=B.p(T),y=function(e){var s=O(x);return B.w(s.date(s.date()+Math.round(e*r)),x)};if(A===w)return this.set(w,this.$M+r);if(A===E)return this.set(E,this.$y+r);if(A===g)return y(1);if(A===k)return y(7);var I=(C={},C[_]=s,C[b]=n,C[o]=e,C)[A]||1,L=this.$d.getTime()+r*I;return B.w(L,this)},L.subtract=function(e,s){return this.add(-1*e,s)},L.format=function(e){var s=this,n=this.$locale();if(!this.isValid())return n.invalidDate||x;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=B.z(this),_=this.$H,b=this.$m,g=this.$M,k=n.weekdays,w=n.months,T=n.meridiem,h=function(e,n,o,_){return e&&(e[n]||e(s,r))||o[n].slice(0,_)},d=function(e){return B.s(_%12||12,e,"0")},E=T||function(e,s,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(I,(function(e,r){return r||function(e){switch(e){case"YY":return String(s.$y).slice(-2);case"YYYY":return B.s(s.$y,4,"0");case"M":return g+1;case"MM":return B.s(g+1,2,"0");case"MMM":return h(n.monthsShort,g,w,3);case"MMMM":return h(w,g);case"D":return s.$D;case"DD":return B.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return h(n.weekdaysMin,s.$W,k,2);case"ddd":return h(n.weekdaysShort,s.$W,k,3);case"dddd":return k[s.$W];case"H":return String(_);case"HH":return B.s(_,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return E(_,b,!0);case"A":return E(_,b,!1);case"m":return String(b);case"mm":return B.s(b,2,"0");case"s":return String(s.$s);case"ss":return B.s(s.$s,2,"0");case"SSS":return B.s(s.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(r,C,x){var A,I=this,L=B.p(C),N=O(r),Y=(N.utcOffset()-this.utcOffset())*s,H=this-N,D=function(){return B.m(I,N)};switch(L){case E:A=D()/12;break;case w:A=D();break;case T:A=D()/3;break;case k:A=(H-Y)/6048e5;break;case g:A=(H-Y)/864e5;break;case b:A=H/n;break;case _:A=H/s;break;case o:A=H/e;break;default:A=H}return x?A:B.a(A)},L.daysInMonth=function(){return this.endOf(w).$D},L.$locale=function(){return H[this.$L]},L.locale=function(e,s){if(!e)return this.$L;var n=this.clone(),r=F(e,s,!0);return r&&(n.$L=r),n},L.clone=function(){return B.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},M}(),V=q.prototype;return O.prototype=V,[["$ms",r],["$s",o],["$m",_],["$H",b],["$W",g],["$M",w],["$y",E],["$D",C]].forEach((function(e){V[e[1]]=function(s){return this.$g(s,e[0],e[1])}})),O.extend=function(e,s){return e.$i||(e(s,q,O),e.$i=!0),O},O.locale=F,O.isDayjs=S,O.unix=function(e){return O(1e3*e)},O.en=H[Y],O.Ls=H,O.p={},O}()},600:function(e,s,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=t(e),n="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),r="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),o="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),_="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),b=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function d(e,s,n){var r,o;return"m"===n?s?"минута":"минуту":e+" "+(r=+e,o={mm:s?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),r%10==1&&r%100!=11?o[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?o[1]:o[2])}var u=function(e,s){return b.test(s)?n[e.month()]:r[e.month()]};u.s=r,u.f=n;var a=function(e,s){return b.test(s)?o[e.month()]:_[e.month()]};a.s=_,a.f=o;var g={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:u,monthsShort:a,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:d,mm:d,h:"час",hh:d,d:"день",dd:d,M:"месяц",MM:d,y:"год",yy:d},ordinal:function(e){return e},meridiem:function(e){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"}};return s.default.locale(g,null,!0),g}(n(484))},712:function(e){e.exports=function(){"use strict";return function(e,s,n){var r="h:mm A",o={lastDay:"[Yesterday at] "+r,sameDay:"[Today at] "+r,nextDay:"[Tomorrow at] "+r,nextWeek:"dddd [at] "+r,lastWeek:"[Last] dddd [at] "+r,sameElse:"MM/DD/YYYY"};s.prototype.calendar=function(e,s){var r=s||this.$locale().calendar||o,_=n(e||void 0).startOf("d"),b=this.diff(_,"d",!0),g="sameElse",k=b<-6?g:b<-1?"lastWeek":b<0?"lastDay":b<1?"sameDay":b<2?"nextDay":b<7?"nextWeek":g,w=r[k]||o[k];return"function"==typeof w?w.call(this,n()):this.format(w)}}}()},646:function(e){e.exports=function(){"use strict";var e,s,n=1e3,r=6e4,o=36e5,_=864e5,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g=31536e6,k=2628e6,w=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,T={years:g,months:k,days:_,hours:o,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},c=function(e){return e instanceof E},f=function(e,s,n){return new E(e,n,s.$l)},m=function(e){return s.p(e)+"s"},l=function(e){return e<0},$=function(e){return l(e)?Math.ceil(e):Math.floor(e)},y=function(e){return Math.abs(e)},v=function(e,s){return e?l(e)?{negative:!0,format:""+y(e)+s}:{negative:!1,format:""+e+s}:{negative:!1,format:""}},E=function(){function l(e,s,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),s)return f(e*T[m(s)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(s){r.$d[m(s)]=e[s]})),this.calMilliseconds(),this;if("string"==typeof e){var o=e.match(w);if(o){var _=o.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=_[0],this.$d.months=_[1],this.$d.weeks=_[2],this.$d.days=_[3],this.$d.hours=_[4],this.$d.minutes=_[5],this.$d.seconds=_[6],this.calMilliseconds(),this}}return this}var E=l.prototype;return E.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(s,n){return s+(e.$d[n]||0)*T[n]}),0)},E.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=$(e/g),e%=g,this.$d.months=$(e/k),e%=k,this.$d.days=$(e/_),e%=_,this.$d.hours=$(e/o),e%=o,this.$d.minutes=$(e/r),e%=r,this.$d.seconds=$(e/n),e%=n,this.$d.milliseconds=e},E.toISOString=function(){var e=v(this.$d.years,"Y"),s=v(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=v(n,"D"),o=v(this.$d.hours,"H"),_=v(this.$d.minutes,"M"),b=this.$d.seconds||0;this.$d.milliseconds&&(b+=this.$d.milliseconds/1e3,b=Math.round(1e3*b)/1e3);var g=v(b,"S"),k=e.negative||s.negative||r.negative||o.negative||_.negative||g.negative,w=o.format||_.format||g.format?"T":"",T=(k?"-":"")+"P"+e.format+s.format+r.format+w+o.format+_.format+g.format;return"P"===T||"-P"===T?"P0D":T},E.toJSON=function(){return this.toISOString()},E.format=function(e){var n=e||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return n.replace(b,(function(e,s){return s||String(r[e])}))},E.as=function(e){return this.$ms/T[m(e)]},E.get=function(e){var s=this.$ms,n=m(e);return"milliseconds"===n?s%=1e3:s="weeks"===n?$(s/T[n]):this.$d[n],s||0},E.add=function(e,s,n){var r;return r=s?e*T[m(s)]:c(e)?e.$ms:f(e,this).$ms,f(this.$ms+r*(n?-1:1),this)},E.subtract=function(e,s){return this.add(e,s,!0)},E.locale=function(e){var s=this.clone();return s.$l=e,s},E.clone=function(){return f(this.$ms,this)},E.humanize=function(s){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},E.valueOf=function(){return this.asMilliseconds()},E.milliseconds=function(){return this.get("milliseconds")},E.asMilliseconds=function(){return this.as("milliseconds")},E.seconds=function(){return this.get("seconds")},E.asSeconds=function(){return this.as("seconds")},E.minutes=function(){return this.get("minutes")},E.asMinutes=function(){return this.as("minutes")},E.hours=function(){return this.get("hours")},E.asHours=function(){return this.as("hours")},E.days=function(){return this.get("days")},E.asDays=function(){return this.as("days")},E.weeks=function(){return this.get("weeks")},E.asWeeks=function(){return this.as("weeks")},E.months=function(){return this.get("months")},E.asMonths=function(){return this.as("months")},E.years=function(){return this.get("years")},E.asYears=function(){return this.as("years")},l}(),p=function(e,s,n){return e.add(s.years()*n,"y").add(s.months()*n,"M").add(s.days()*n,"d").add(s.hours()*n,"h").add(s.minutes()*n,"m").add(s.seconds()*n,"s").add(s.milliseconds()*n,"ms")};return function(n,r,o){e=o,s=o().$utils(),o.duration=function(e,s){var n=o.locale();return f(e,{$l:n},s)},o.isDuration=c;var _=r.prototype.add,b=r.prototype.subtract;r.prototype.add=function(e,s){return c(e)?p(this,e,1):_.bind(this)(e,s)},r.prototype.subtract=function(e,s){return c(e)?p(this,e,-1):b.bind(this)(e,s)}}}()},110:function(e){e.exports=function(){"use strict";return function(e,s,n){e=e||{};var r=s.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,s,n,o){return r.fromToBase(e,s,n,o)}n.en.relativeTime=o,r.fromToBase=function(s,r,_,b,g){for(var k,w,T,E=_.$locale().relativeTime||o,C=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=C.length,A=0;A<x;A+=1){var I=C[A];I.d&&(k=b?n(s).diff(_,I.d,!0):_.diff(s,I.d,!0));var L=(e.rounding||Math.round)(Math.abs(k));if(T=k>0,L<=I.r||!I.r){L<=1&&A>0&&(I=C[A-1]);var N=E[I.l];g&&(L=g(""+L)),w="string"==typeof N?N.replace("%d",L):N(L,r,I.l,T);break}}if(r)return w;var Y=T?E.future:E.past;return"function"==typeof Y?Y(w):Y.replace("%s",w)},r.to=function(e,s){return i(e,s,this,!0)},r.from=function(e,s){return i(e,s,this)};var d=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(d(this),e)},r.fromNow=function(e){return this.from(d(this),e)}}}()}},s={};function __webpack_require__(n){var r=s[n];if(void 0!==r)return r.exports;var o=s[n]={exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(s,{a:s}),s},__webpack_require__.d=(e,s)=>{for(var n in s)__webpack_require__.o(s,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},__webpack_require__.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),__webpack_require__.p="/ono-tebe-nado-2/",(()=>{"use strict";class Api{constructor(e,s={}){var n;this.baseUrl=e,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(n=s.headers)&&void 0!==n?n:{})}}handleResponse(e){return e.ok?e.json():e.json().then((s=>{var n;return Promise.reject(null!==(n=s.error)&&void 0!==n?n:e.statusText)}))}get(e){return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}post(e,s,n="POST"){return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:n,body:JSON.stringify(s)})).then(this.handleResponse)}}const e=__webpack_require__.p+"content/logo.svg";var s,n=__webpack_require__(484),r=__webpack_require__.n(n),o=(__webpack_require__(600),__webpack_require__(712)),_=__webpack_require__.n(o),b=__webpack_require__(646),g=__webpack_require__.n(b),k=__webpack_require__(110),w=__webpack_require__.n(k);function isSelector(e){return"string"==typeof e&&e.length>1}function ensureElement(e,s){if(isSelector(e)){const n=function ensureAllElements(e,s=document){if(isSelector(e))return Array.from(s.querySelectorAll(e));if(e instanceof NodeList)return Array.from(e);if(Array.isArray(e))return e;throw new Error("Unknown selector element")}(e,s);if(n.length>1&&console.warn(`selector ${e} return more then one element`),0===n.length)throw new Error(`selector ${e} return nothing`);return n.pop()}if(e instanceof HTMLElement)return e;throw new Error("Unknown selector element")}function cloneTemplate(e){return ensureElement(e).content.firstElementChild.cloneNode(!0)}function createElement(e,s,n){const r=document.createElement(e);if(s){if(s.dataset&&function setElementData(e,s){for(const n in s)e.dataset[n]=String(s[n])}(r,s.dataset),s.attrs)for(const[e,n]of Object.entries(s.attrs))r.setAttribute(e,n);for(const e in s){if(!Object.prototype.hasOwnProperty.call(s,e))continue;if("dataset"===e||"attrs"===e)continue;const n=s[e];null!=n&&("string"==typeof e&&(e.startsWith("aria-")||e.startsWith("data-")||e.includes("-"))?r.setAttribute(e,String(n)):r[e]=(n,n))}}if(n)for(const e of Array.isArray(n)?n:[n])r.append(e);return r}function scrollToElement(e,s={behavior:"smooth",block:"start"}){const n=ensureElement(e);if(!n)throw new Error(`Element with id "${e}" not found`);n.scrollIntoView(s)}r().locale("ru"),r().extend(_()),r().extend(g()),r().extend(w());const T=`${(null!==(s="/ono-tebe-nado-2/")?s:"/").replace(/\/$/,"")}/content`,E=[{type:"a",className:"header__logo",href:"#",children:[{type:"img",className:"header__logo-image",src:e,alt:"Ono-tebe-nado! logo"}]},{type:"nav",className:"header__menu",children:[{type:"a",className:"header__menu-lot",href:"#",textContent:"Главная",callbackData:{callbackType:"click",callbackFn:e=>{e.preventDefault(),scrollToElement(".page__container")}}},{type:"a",className:"header__menu-lot",href:"#",textContent:"Посмотреть лоты",callbackData:{callbackType:"click",callbackFn:e=>{e.preventDefault(),scrollToElement(".catalog")}}},{type:"a",className:"header__menu-lot",href:"#",textContent:"Об аукционе",callbackData:{callbackType:"click",callbackFn:e=>{e.preventDefault(),scrollToElement(".about")}}}]}];class Component{constructor(e,s){this.container=e,this.events=s}toggleClass(e,s,n){e.classList.toggle(s,n)}setText(e,s){e&&(e.textContent=String(s))}setDisabled(e,s){e&&(s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))}setHidden(e){e.style.display="none"}setVisible(e){e.style.removeProperty("display")}setImage(e,s,n){e&&(e.src=s,n&&(e.alt=n))}render(e){return Object.assign(this,null!=e?e:{}),this.container}}class Model{constructor(e,s){this.events=s,Object.assign(this,e)}emitChanges(e,s){this.events.emit(e,null!=s?s:{})}}class Catalog extends Model{constructor(e,s,n){super(e,n),this.items=e.items,this.loading=e.loading,this.eventKey=s}setItems(e){this.items=e,this.emitChanges(this.eventKey,{items:this.items})}}class HeaderItemView extends Component{constructor(e){super(createElement("span",{className:""}),e)}render(e){var s,n;if(!e)return this.container;const r={className:null!==(s=e.className)&&void 0!==s?s:"",textContent:e.textContent};e.dataset&&(r.dataset=e.dataset),"a"===e.type&&(r.href=e.href),"img"===e.type&&(r.src=e.src,e.alt&&(r.alt=e.alt));const o=createElement(e.type,r);if(null===(n=e.children)||void 0===n?void 0:n.length){const s=e.children.map((e=>new HeaderItemView(this.events).render(e)));o.append(...s)}return e.callbackData&&o.addEventListener(e.callbackData.callbackType,e.callbackData.callbackFn),this.container.replaceChildren(o),this.container}}var __rest=function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class Form extends Component{constructor(e,s){super(e,s),this.container=e,this.events=s,this._submit=ensureElement("button[type=submit]",this.container),this._errors=ensureElement(".form__errors",this.container),this.container.addEventListener("input",(e=>{const s=e.target,n=s.name,r=s.value;this.onInputChange(n,r)})),this.container.addEventListener("submit",(e=>{e.preventDefault(),this.events.emit(`${this.container.name}:submit`)}))}onInputChange(e,s){this.events.emit(`${this.container.name}.${String(e)}:change`,{field:e,value:s})}set valid(e){this._submit.disabled=!e}set errors(e){this.setText(this._errors,e)}render(e){const{valid:s,errors:n}=e,r=__rest(e,["valid","errors"]);return super.render({valid:s,errors:n}),Object.assign(this,r),this.container}}class OrderFormView extends Form{set email(e){this.container.elements.namedItem("email").value=e}set phone(e){this.container.elements.namedItem("phone").value=e}}const C=new class EventEmitter{constructor(){this._events=new Map}on(e,s){var n;this._events.has(e)||this._events.set(e,new Set),null===(n=this._events.get(e))||void 0===n||n.add(s)}off(e,s){var n;this._events.has(e)&&(this._events.get(e).delete(s),0===(null===(n=this._events.get(e))||void 0===n?void 0:n.size)&&this._events.delete(e))}emit(e,s){this._events.forEach(((n,r)=>{"*"===r&&n.forEach((n=>n({eventName:e,data:s}))),(r instanceof RegExp&&r.test(e)||r===e)&&n.forEach((e=>e(s)))}))}onAll(e){this.on("*",e)}offAll(){this._events=new Map}trigger(e,s){return(n={})=>{this.emit(e,Object.assign(Object.assign({},n||{}),s||{}))}}},x=new class AuctionAPI extends Api{constructor(e,s,n){super(s,n),this.cdn=e}getLotItem(e){return this.get(`/lot/${e}`).then((e=>Object.assign(Object.assign({},e),{image:this.cdn+e.image})))}getLotUpdate(e){return this.get(`/lot/${e}/_auction`).then((e=>e))}getLotList(){return this.get("/lot").then((e=>e.items.map((e=>Object.assign(Object.assign({},e),{image:this.cdn+e.image})))))}placeBid(e,s){return this.post(`/lot/${e}/_bid`,s).then((e=>e))}orderLots(e){return this.post("/order",e).then((e=>e))}}(T,"https://onotebenado-api.nomoreparties.co/api/onotebenado");C.onAll((({eventName:e,data:s})=>{console.log(e,s)}));const A=ensureElement(".page__wrapper"),I=ensureElement("#modal-container"),L=ensureElement(".header",A),N=ensureElement("main .catalog",A),Y=ensureElement(".catalog__items",N),H=new class LoadingView extends Component{constructor(e){super(cloneTemplate("#loading"),e)}}(C),j=new class Header extends Model{constructor(e,s){super(e,s),this.events=s,this.items.push({type:"button",className:"header__basket",children:[{type:"span",className:"header__basket-counter",textContent:"0",dataset:{element:"basket",component:"basket"}}],callbackData:{callbackType:"click",callbackFn:e=>{e.preventDefault(),this.emitChanges("basket:open")}}})}}({items:E},C),F=new class HeaderView extends Component{constructor(e,s,n){super(e,s),this._headerContainer=ensureElement(".header__container",e),this.HeaderItem=n}set items(e){this._headerContainer.replaceChildren(...e.map((e=>new this.HeaderItem(this.events).render(e))))}}(L,C,HeaderItemView);A.prepend(F.render(j));const B=new Catalog({items:[],loading:H.render()},"catalog.items:changed",C),q=new Catalog({items:[],loading:H.render()},"basket.items:changed",C),V=new class CatalogView extends Component{constructor(e,s,n,r){super(e,s),this.Item=n,this.loading=r}set items(e){this.container.replaceChildren(...e.map((e=>new this.Item(this.events).render(e))))}renderLoading(){this.container.replaceChildren(this.loading)}}(Y,C,class lotCatalogView extends Component{constructor(e){const s=cloneTemplate("#card");ensureElement(".card__action",s).addEventListener("click",(()=>{this.events.emit("catalog.items:click",{id:this._id})})),super(s,e),this._id=""}set id(e){this._id=e}set datetime(e){this._datetime=this.parseDate(e),this._status&&this.updateStatusText(this._status)}set status(e){this._status=e;const s=ensureElement(".card__status",this.container),n=this._datetime;let r="Неизвестно";switch(e){case"wait":r=n?`Открыто до ${this.formatDate(n)}`:"Открыто до (дата не указана)";break;case"active":r=n?`Откроется ${this.formatDate(n)}`:"Откроется (дата не указана)";break;case"closed":r="Закрыто"}this.setText(s,r)}updateStatusText(e){const s=ensureElement(".card__status",this.container),n=this._datetime;let r,o;switch(e){case"wait":r=n?`Откроется ${this.formatDate(n)}`:"Откроется (дата не указана)";break;case"active":r=n?`Открыто до ${this.formatDate(n)}`:"Открыто до (дата не указана)",o="card__status_active";break;case"closed":r=n?`Закрыто ${this.formatDate(n)}`:"Закрыто (дата не указана)",o="card__status_closed"}this.setText(s,r),this.toggleClass(s,o)}parseDate(e){if(null==e)return null;if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;const s=e.trim();if(!s)return null;const n=new Date(s);return Number.isNaN(n.getTime())?null:n}formatDate(e){return e.toLocaleDateString("ru-RU",{day:"numeric",month:"long",hour:"numeric",minute:"numeric"})}set title(e){this.setText(ensureElement(".card__title",this.container),e),this._title=e}set about(e){this.setText(ensureElement(".card__description",this.container),e),this._about=e}set image(e){this.setImage(ensureElement(".card__image",this.container),e,this._title),this._image=e}},H.render()),P=new class BasketView extends Component{constructor(e,s,n){const r=createElement("div",{className:"basket-modal"}),o=cloneTemplate("#tabs"),_=cloneTemplate("#basket"),b=ensureElement(".header__basket-counter");super(r,e),this._items=[],this._activeTab="active",this.selectedClosedIds=new Set,this.ActiveItem=s,this.SoldItem=n,this.tabs=o,this.basketContent=_,this.headerBasketCounter=b,this.basketList=ensureElement(".basket__list",this.basketContent),this.basketActions=ensureElement(".basket__actions",this.basketContent),this.basketTotal=ensureElement(".basket__total",this.basketContent),this.basketActionButton=ensureElement(".basket__action",this.basketContent),this.activeTabButton=ensureElement('[name="active"]',this.tabs),this.closedTabButton=ensureElement('[name="closed"]',this.tabs),this.activeTabButton.addEventListener("click",(()=>{this.setActiveTab("active")})),this.closedTabButton.addEventListener("click",(()=>{this.setActiveTab("closed")})),this.basketActionButton.addEventListener("click",(e=>{e.preventDefault(),this.emitCheckout()})),this.container.append(this.tabs,this.basketContent),this.renderCurrentTab()}set items(e){this._items=Array.isArray(e)?e:[],this.cleanupSelection(),this.updateHeaderCounter(),this.renderCurrentTab(),this.container.replaceChildren(this.tabs,this.basketContent)}clearSelection(){this.selectedClosedIds.clear(),this.updateTotalsAndAction(this.getTabItems("closed"))}setActiveTab(e){this._activeTab!==e&&(this._activeTab=e,this.renderCurrentTab())}renderCurrentTab(){const e=this.getTabItems(this._activeTab);if(this.updateTabButtons(),"active"===this._activeTab)return this.renderActiveItems(e),void this.setHidden(this.basketActions);this.renderClosedItems(e),this.setVisible(this.basketActions),this.updateTotalsAndAction(e)}renderActiveItems(e){this.basketList.replaceChildren(...e.map((e=>new this.ActiveItem(this.events).render(e))))}renderClosedItems(e){this.basketList.replaceChildren(...e.map((s=>{const n=new this.SoldItem(this.events).render(s),r=ensureElement(".bid__selector-input",n);return r.checked=this.selectedClosedIds.has(s.id),r.addEventListener("change",(()=>{r.checked?this.selectedClosedIds.add(s.id):this.selectedClosedIds.delete(s.id),this.updateTotalsAndAction(e)})),n})))}getTabItems(e){return"active"===e?this._items.filter((e=>"active"===e.status)):this._items.filter((e=>"closed"===e.status))}emitCheckout(){const e=this.getTabItems("closed").filter((e=>this.selectedClosedIds.has(e.id)));if(!e.length)return;const s={items:e.map((e=>e.id)),total:e.reduce(((e,s)=>e+s.price),0)};this.events.emit("basket:checkout",s)}updateTabButtons(){const e="active"===this._activeTab;this.toggleClass(this.activeTabButton,"button_active",e),this.toggleClass(this.closedTabButton,"button_active",!e)}updateTotalsAndAction(e){const s=e.reduce(((e,s)=>this.selectedClosedIds.has(s.id)?e+s.price:e),0);this.setText(this.basketTotal,this.formatAmount(s)),this.basketActionButton.disabled=0===s}cleanupSelection(){const e=new Set(this.getTabItems("closed").map((e=>e.id)));Array.from(this.selectedClosedIds).forEach((s=>{e.has(s)||this.selectedClosedIds.delete(s)}))}updateHeaderCounter(){this.setText(this.headerBasketCounter,this._items.length)}formatAmount(e){return new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}}(C,class lotBasketView extends Component{constructor(e){const s=cloneTemplate("#bid");ensureElement(".bid__open",s).addEventListener("click",(()=>{this.events.emit("catalog.items:click",{id:this._id})})),super(s,e),this._id=""}set id(e){this._id=e}set datetime(e){this._datetime=this.parseDate(e)}parseDate(e){if(null==e)return null;if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;const s=e.trim();if(!s)return null;const n=new Date(s);return Number.isNaN(n.getTime())?null:n}set title(e){this.setText(ensureElement(".bid__title",this.container),e),this._title=e}set price(e){this.setText(ensureElement(".bid__amount",this.container),this.formatAmount(e))}set image(e){this.setImage(ensureElement(".bid__image",this.container),e,this._title),this._image=e}formatAmount(e){return new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}},class lotSoldBasketView extends Component{constructor(e){super(cloneTemplate("#sold"),e)}set title(e){this.setText(ensureElement(".bid__title",this.container),e),this._title=e}set image(e){this.setImage(ensureElement(".bid__image",this.container),e,this._title)}set price(e){this.setText(ensureElement(".bid__amount",this.container),this.formatAmount(e))}formatAmount(e){return new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}}),U=new class Modal extends Component{constructor(e,s){super(e,s),this.events=s,this._closeButton=ensureElement(".modal__close",e),this._content=ensureElement(".modal__content",e),this._closeButton.addEventListener("click",this.close.bind(this)),this.container.addEventListener("click",this.close.bind(this)),this._content.addEventListener("click",(e=>e.stopPropagation()))}set content(e){this._content.replaceChildren(e)}open(){this.container.classList.add("modal_active"),this.events.emit("modal:open"),document.body.style.overflow="hidden"}close(){this.container.classList.remove("modal_active"),this._content.replaceChildren(),this.events.emit("modal:close"),document.body.style.overflow=""}render(e){return super.render(e),this.open(),this.container}}(I,C),W=new class lotModalView extends Component{constructor(e){super(cloneTemplate("#lot"),e),this._id="",this._title="",this._description="",this._image="",this._status=null,this._datetime=null,this._price=0,this._minPrice=0,this._history=[]}set id(e){this._id=e}set datetime(e){this._datetime=this.parseDate(e),this.syncStatusText()}set status(e){this._status=e,this.syncStatusText()}syncStatusText(){this._status&&this.updateStatusText(this._status)}updateStatusText(e){const s=ensureElement(".lot__status-timer",this.container),n=ensureElement(".lot__status-text",this.container),r=ensureElement(".lot__bid",this.container),o=this._datetime;let _="Дата не указана",b="";switch(e){case"wait":_=o?this.formatCountdown(o):"Дата не указана",b="До начала аукциона",this.setHidden(r);break;case"active":_=o?this.formatCountdown(o):"Дата не указана",b="До закрытия лота";break;case"closed":_="Аукцион завершён",b=`Продано за ${this.formatCurrency(this._price)}`,this.setHidden(r)}this.setText(s,_),this.setText(n,b)}parseDate(e){if(null==e)return null;if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;const s=e.trim();if(!s)return null;const n=new Date(s);return Number.isNaN(n.getTime())?null:n}formatCountdown(e){const s=this.parseDate(e);if(!s)return"0д 0ч 0 мин 0 сек";const n=Math.max(0,s.getTime()-Date.now()),r=Math.floor(n/1e3);return`${Math.floor(r/86400)}д ${Math.floor(r%86400/3600)}ч ${Math.floor(r%3600/60)} мин ${r%60} сек`}set title(e){this.setText(ensureElement(".lot__title",this.container),e),this._title=e}set description(e){const s=ensureElement(".lot__content",this.container),n=ensureElement(".lot__title",s),r=e.split("\n").map((e=>e.trim())).filter(Boolean);s.querySelectorAll(".lot__description").forEach((e=>e.remove()));const o=r.length?r.map((e=>createElement("p",{className:"lot__description",textContent:e}))):[createElement("p",{className:"lot__description",textContent:""})],_=document.createDocumentFragment();o.forEach((e=>_.appendChild(e))),n.after(_),this._description=e}set image(e){this.setImage(ensureElement(".lot__image",this.container),e,this._title),this._image=e}set history(e){this._history=Array.isArray(e)?e:[];const s=ensureElement(".lot__history",this.container),n=ensureElement(".lot__bid",this.container);if(s.replaceChildren(),this._history.length){{this.setVisible(s);const e=createElement("span",{className:"lot__history-caption",textContent:"Последние ставки:"}),n=createElement("ul",{className:"lot__history-bids"});this._history.forEach((e=>{const s=createElement("li",{className:"lot__history-item",textContent:String(e)});n.appendChild(s)})),s.append(e,n)}if("closed"!==this._status&&"wait"!==this._status){this.setVisible(n);const e=n.elements.namedItem("lot_bid");if(!e)return;e.addEventListener("input",(e=>{const s=e.target,n=s.value.replace(/\D/g,"");s.value=n?this.formatCurrency(Number(n),!1):""})),n.addEventListener("submit",(s=>{s.preventDefault();const n=Number(e.value);e.value="",this.events.emit("lot:placeBid",{id:this._id,value:n})}))}else this.setHidden(n)}else this.setHidden(s)}set price(e){this._price=e,this.syncStatusText()}set minPrice(e){this._minPrice=e}formatCurrency(e,s=!0){let n={style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0};return s&&(n=Object.assign(Object.assign({},n),{style:"currency",currency:"RUB"})),new Intl.NumberFormat("ru-RU",n).format(e)}}(C);let R=null,J=!1;const z={email:"",phone:"",items:[],total:0,valid:!1,errors:"Заполните поля"},validateOrderState=()=>{const e=[];var s;z.email.trim()&&(s=z.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim()))||e.push("Проверьте email"),z.phone.trim()&&(e=>e.replace(/\D/g,"").length>=10)(z.phone)||e.push("Проверьте телефон"),z.items.length||e.push("Выберите лоты"),z.valid=0===e.length,z.errors=e.join(", "),R&&R.render({email:z.email,phone:z.phone,valid:z.valid,errors:z.errors})};N.append(V.render()),C.on("catalog.items:changed",(()=>{V.render(B)})),C.on("catalog.items:click",(e=>{U.render({content:H.render()}),x.getLotItem(e.id).then((e=>{U.render({content:W.render(e)})})).catch((e=>{console.error(e)}))})),C.on("lot:placeBid",(({id:e,value:s})=>{U.render({content:H.render()}),x.placeBid(e,{price:s}).then((e=>{U.render({content:W.render(e)})})).catch((e=>{console.error(e)}))})),C.on("basket:open",(()=>{J=!0,U.render({content:H.render()}),x.getLotList().then((e=>{q.setItems(e)})).catch((e=>{console.error(e)}))})),C.on("basket.items:changed",(()=>{const e=P.render(q);J&&U.render({content:e})})),C.on("basket:checkout",(e=>{z.items=e.items,z.total=e.total,z.email="",z.phone="",z.valid=!1,z.errors="Заполните поля";const s=cloneTemplate("#order");R=new OrderFormView(s,C),validateOrderState(),U.render({content:R.render({email:z.email,phone:z.phone,valid:z.valid,errors:z.errors})})})),C.on("order.email:change",(e=>{z.email=e.value,validateOrderState()})),C.on("order.phone:change",(e=>{z.phone=e.value,validateOrderState()})),C.on("order:submit",(()=>{validateOrderState(),z.valid&&(U.render({content:H.render()}),x.orderLots({email:z.email.trim(),phone:z.phone.trim(),items:[...z.items]}).then((()=>{J=!1,P.clearSelection(),q.setItems(q.items.filter((e=>!z.items.includes(e.id)))),(()=>{const e=cloneTemplate("#success");ensureElement(".state__action",e).addEventListener("click",(()=>{U.close()})),U.render({content:e})})()})).catch((e=>{console.error(e),R&&(z.valid=!0,z.errors="Не удалось оформить заказ, попробуйте снова",U.render({content:R.render({email:z.email,phone:z.phone,valid:z.valid,errors:z.errors})}))})))})),C.on("modal:close",(()=>{J=!1})),V.renderLoading(),x.getLotList().then((e=>{B.setItems(e)})).catch((e=>{console.error(e)}))})()})();
//# sourceMappingURL=main.js.map